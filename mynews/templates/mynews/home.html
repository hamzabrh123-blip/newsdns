{% extends 'mynews/base.html' %}
{% load static %}

{% block content %}
<link href="https://fonts.googleapis.com/css2?family=Mukta:wght@400;700;800&display=swap" rel="stylesheet">

<style>
    body { background-color: #f8f9fa !important; font-family: 'Mukta', sans-serif; }
    
    /* Premium Hero Grid (No Ticker) */
    .hero-container { display: grid; grid-template-columns: 2fr 1fr; gap: 15px; margin: 20px 0 40px; }
    .main-story { position: relative; height: 500px; border-radius: 12px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
    .main-story img { width: 100%; height: 100%; object-fit: cover; }
    .story-overlay { position: absolute; bottom: 0; left: 0; padding: 30px; background: linear-gradient(transparent, rgba(0,0,0,0.9)); color: #fff; width: 100%; }
    .story-overlay h1 { font-size: 2.2rem; font-weight: 800; line-height: 1.2; }

    .side-stories { display: flex; flex-direction: column; gap: 15px; }
    .small-card { position: relative; height: 242px; border-radius: 12px; overflow: hidden; }
    .small-card img { width: 100%; height: 100%; object-fit: cover; }
    .small-card-content { position: absolute; bottom: 0; left: 0; padding: 15px; background: linear-gradient(transparent, rgba(0,0,0,0.8)); color: #fff; width: 100%; }

    /* Section Headers */
    .section-header { border-bottom: 3px solid #cf2030; margin: 40px 0 20px; display: flex; }
    .section-header h3 { background: #cf2030; color: #fff; padding: 8px 20px; font-weight: 800; margin: 0; font-size: 1.3rem; }

    .news-card { background: #fff; border-radius: 10px; overflow: hidden; border: 1px solid #eee; height: 100%; transition: 0.3s; }
    .news-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.08); }
    .news-card .thumb { height: 170px; display: block; overflow: hidden; }
    .news-card img { width: 100%; height: 100%; object-fit: cover; }
    .news-card .body { padding: 15px; }
    .news-card .title { font-weight: 700; color: #222; text-decoration: none; font-size: 1rem; line-height: 1.4; display: block; }

    @media (max-width: 992px) { .hero-container { grid-template-columns: 1fr; } .main-story { height: 300px; } }
</style>

<div class="container-fluid" style="padding: 0 40px;">
    <div class="row">
        <div class="col-lg-9">
            
            {% if page_number == 1 %}
            <div class="hero-container">
                {% for item in top_5_highlights|slice:":1" %}
                <div class="main-story">
                    <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}">
                        <img src="{% if item.image_url %}{{ item.image_url }}{% elif item.image %}{{ item.image.url }}{% else %}{% static 'logo.png' %}{% endif %}">
                        <div class="story-overlay">
                            <span class="badge bg-danger mb-2">{{ item.district }}</span>
                            <h1>{{ item.title }}</h1>
                        </div>
                    </a>
                </div>
                {% endfor %}

                <div class="side-stories">
                    {% for item in top_5_highlights|slice:"1:3" %}
                    <div class="small-card">
                        <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}">
                            <img src="{% if item.image_url %}{{ item.image_url }}{% elif item.image %}{{ item.image.url }}{% else %}{% static 'logo.png' %}{% endif %}">
                            <div class="small-card-content">
                                <h5 class="m-0" style="font-size:1rem; font-weight:700;">{{ item.title|truncatechars:60 }}</h5>
                            </div>
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <div class="section-header"><h3>उत्तर प्रदेश</h3></div>
            <div class="row">
                {% for item in up_news|slice:":6" %}
                <div class="col-md-4 mb-4">
                    <div class="news-card">
                        <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="thumb">
                            <img src="{% if item.image_url %}{{ item.image_url }}{% elif item.image %}{{ item.image.url }}{% else %}{% static 'logo.png' %}{% endif %}">
                        </a>
                        <div class="body">
                            <span class="text-danger fw-bold" style="font-size:11px;">{{ item.district }}</span>
                            <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="title mt-1">{{ item.title|truncatechars:70 }}</a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="section-header"><h3>भारत</h3></div>
                    {% for item in national_news %}
                    <div class="d-flex bg-white p-2 mb-3 rounded border">
                        <img src="{% if item.image_url %}{{ item.image_url }}{% elif item.image %}{{ item.image.url }}{% else %}{% static 'logo.png' %}{% endif %}" style="width:90px; height:65px; object-fit:cover; border-radius:5px;">
                        <div class="ms-3">
                            <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="title" style="font-size:14px;">{{ item.title|truncatechars:55 }}</a>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                <div class="col-md-6">
                    <div class="section-header"><h3>दुनिया</h3></div>
                    {% for item in world_news %}
                    <div class="d-flex bg-white p-2 mb-3 rounded border">
                        <img src="{% if item.image_url %}{{ item.image_url }}{% elif item.image %}{{ item.image.url }}{% else %}{% static 'logo.png' %}{% endif %}" style="width:90px; height:65px; object-fit:cover; border-radius:5px;">
                        <div class="ms-3">
                            <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="title" style="font-size:14px;">{{ item.title|truncatechars:55 }}</a>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <div class="section-header"><h3>ताज़ा खबरें</h3></div>
            <div class="row">
                {% for item in other_news %}
                <div class="col-md-4 mb-4">
                    <div class="news-card">
                        <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="thumb">
                            <img src="{% if item.image_url %}{{ item.image_url }}{% elif item.image %}{{ item.image.url }}{% else %}{% static 'logo.png' %}{% endif %}">
                        </a>
                        <div class="body">
                            <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="title">{{ item.title|truncatechars:75 }}</a>
                            <small class="text-muted">{{ item.date|date:"d M, Y" }}</small>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

            </div>

        <div class="col-lg-3">
            <div class="sticky-top" style="top:20px;">
                {% include "mynews/sidebar.html" %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
