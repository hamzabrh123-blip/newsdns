{% extends 'mynews/base.html' %}
{% load static %}
{% load cloudinary_tags %}

{% block content %}
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

<style>
    /* Global Layout Fix */
    .container-custom { max-width: 1250px; margin: 0 auto; padding: 0 15px; }
    body { background-color: #f8f9fa !important; font-family: 'Poppins', 'Mukta', sans-serif; }

    /* Clean Card System (No Overlay) */
    .news-box { background: #fff; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-bottom: 20px; transition: 0.3s; display: flex; flex-direction: column; }
    .news-box:hover { transform: translateY(-3px); box-shadow: 0 8px 15px rgba(0,0,0,0.12); }
    .news-box img { width: 100%; height: auto; object-fit: cover; border-bottom: 1px solid #eee; }
    .news-box-content { padding: 15px; }
    
    /* Big Box Special Styling */
    .big-news-box img { height: 300px; } /* Image choti rakhi hai */
    .big-news-box h1, .big-news-box h2 { font-size: 1.6rem; font-weight: 800; color: #1a1a1a; margin-bottom: 10px; line-height: 1.3; }
    .big-news-box p { color: #555; font-size: 0.95rem; line-height: 1.6; }

    /* Section Headers */
    .section-title { border-left: 6px solid #d32f2f; padding: 8px 15px; font-weight: 900; color: #1a1a1a; margin: 40px 0 20px; background: #f1f1f1; text-transform: uppercase; font-size: 1.2rem; }

    /* Small Box Grid */
    .small-news-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    .small-box img { height: 120px; }
    .small-box h4 { font-size: 0.9rem; font-weight: 700; margin: 0; line-height: 1.4; color: #333; }

    /* Mobile Responsive */
    @media (max-width: 768px) {
        .small-news-grid { grid-template-columns: 1fr; }
        .big-news-box h1, .big-news-box h2 { font-size: 1.3rem; }
        .container-custom { padding: 0 10px; }
    }
</style>

<div class="container-custom mt-4">
    <div class="row">
        <div class="col-lg-9">
            
            <h4 class="section-title">अंतरराष्ट्रीय (International)</h4>
            <div class="row">
                {% for item in international_news %}
                    {% if forloop.first %}
                    <div class="col-12 mb-4">
                        <div class="news-box big-news-box">
                            <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}">
                                <img src="{{ item.image_url|default:item.image.url }}" alt="{{ item.title }}">
                            </a>
                            <div class="news-box-content">
                                <span class="badge bg-danger mb-2">Duniya</span>
                                <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="text-decoration-none">
                                    <h2>{{ item.title }}</h2>
                                </a>
                                <p>{{ item.content|striptags|truncatewords:50 }}...</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-12"><div class="small-news-grid">
                    {% else %}
                        <div class="news-box small-box flex-row">
                            <img src="{{ item.image_url|default:item.image.url }}" style="width: 120px; height: 90px;">
                            <div class="news-box-content">
                                <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="text-decoration-none">
                                    <h4>{{ item.title|truncatechars:65 }}</h4>
                                </a>
                            </div>
                        </div>
                    {% endif %}
                    {% if forloop.last %}</div></div>{% endif %}
                {% endfor %}
            </div>

            <h4 class="section-title">देश और दिल्ली (National & Delhi)</h4>
            <div class="row">
                {% for item in national_news %}
                    <div class="col-md-6 mb-3">
                        <div class="news-box flex-row" style="height: 100px;">
                            <img src="{{ item.image_url|default:item.image.url }}" style="width: 130px; height: 100px;">
                            <div class="news-box-content">
                                <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="text-decoration-none">
                                    <h4 style="font-size: 0.9rem;">{{ item.title|truncatechars:70 }}</h4>
                                </a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>

            <h4 class="section-title">उत्तर प्रदेश (UP News)</h4>
            <div class="row">
                {% for item in up_news %}
                <div class="col-md-4 col-6 mb-4">
                    <div class="news-box">
                        <img src="{{ item.image_url|default:item.image.url }}" style="height: 150px;">
                        <div class="news-box-content">
                            <span class="text-danger fw-bold small">{{ item.district }}</span>
                            <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="text-decoration-none">
                                <h4 style="font-size: 0.85rem; margin-top: 5px;">{{ item.title|truncatechars:55 }}</h4>
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

            <h4 class="section-title">मनोरंजन (Bollywood & Hollywood)</h4>
            <div class="row">
                {% for item in entertainment_news %}
                <div class="col-md-6 mb-3">
                    <div class="news-box flex-row align-items-center">
                        <img src="{{ item.image_url|default:item.image.url }}" style="width: 100px; height: 75px; border-radius: 4px; margin: 10px;">
                        <div class="news-box-content p-2">
                            <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="text-decoration-none">
                                <h4 style="font-size: 0.9rem;">{{ item.title }}</h4>
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

            <h4 class="section-title">Tech & Market Rate</h4>
            <div class="row">
                {% for item in tech_market_news %}
                <div class="col-md-12 mb-2">
                    <div class="p-3 bg-white border-start border-danger border-4 shadow-sm">
                         <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="text-dark text-decoration-none fw-bold">
                            <i class="fas fa-chart-line text-danger me-2"></i> {{ item.title }}
                         </a>
                    </div>
                </div>
                {% endfor %}
            </div>

            <h4 class="section-title">खेल (Sports)</h4>
            <div class="row">
                {% for item in sports_news %}
                <div class="col-md-4 mb-4">
                    <div class="news-box text-center">
                        <img src="{{ item.image_url|default:item.image.url }}" style="height: 160px;">
                        <div class="news-box-content">
                            <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="text-decoration-none">
                                <h4 style="font-size: 0.9rem;">{{ item.title }}</h4>
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

        </div>

        <div class="col-lg-3">
            <div class="sticky-top" style="top: 20px;">
                {% include "mynews/sidebar.html" %}
            </div>
        </div>
    </div>
</div>

{% endblock %}
