{% extends 'mynews/base.html' %}
{% load static %}

{% block content %}
<style>
    .container-custom { max-width: 1250px; margin: 0 auto; padding: 0 15px; }
    body { background-color: #f8f9fa !important; font-family: 'Poppins', 'Mukta', sans-serif; }

    /* News Box Base */
    .news-box { background: #fff; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-bottom: 20px; transition: 0.3s; display: flex; flex-direction: column; height: 100%; }
    .news-box:hover { transform: translateY(-3px); box-shadow: 0 8px 15px rgba(0,0,0,0.12); }
    .news-box img { width: 100%; object-fit: cover; }
    .news-box-content { padding: 15px; }
    
    /* Bada Box (Hero Item) */
    .big-news-box img { height: 380px; }
    .big-news-box h2 { font-size: 1.8rem; font-weight: 800; color: #1a1a1a; margin-top: 10px; line-height: 1.3; }
    .big-news-box p { color: #555; font-size: 1rem; line-height: 1.6; }

    /* Chota Box (List Item) */
    .list-news-box { flex-direction: row !important; min-height: 110px; }
    .list-news-box img { width: 140px; height: 110px; }
    .list-news-box h4 { font-size: 1rem; font-weight: 700; margin: 0; line-height: 1.4; color: #333; }

    /* Grid for UP News */
    .up-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px; }

    .section-title { border-left: 6px solid #d32f2f; padding: 8px 15px; font-weight: 900; color: #1a1a1a; margin: 40px 0 20px; background: #eee; text-transform: uppercase; font-size: 1.2rem; }

    @media (max-width: 768px) {
        .big-news-box img { height: 220px; }
        .big-news-box h2 { font-size: 1.4rem; }
        .list-news-box img { width: 110px; height: 90px; }
        .list-news-box h4 { font-size: 0.9rem; }
    }
</style>

<div class="container-custom mt-4">
    <div class="row">
        <div class="col-lg-9">
            
            <h4 class="section-title">अंतरराष्ट्रीय (International)</h4>
            <div class="row">
                {% for item in international_news %}
                    {% if forloop.first %}
                        <div class="col-12 mb-3">
                            <div class="news-box big-news-box">
                                <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}">
                                    <img src="{{ item.image_url|default:item.image.url }}" alt="{{ item.title }}">
                                </a>
                                <div class="news-box-content">
                                    <span class="badge bg-danger mb-2">Duniya</span>
                                    <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="text-decoration-none text-dark">
                                        <h2>{{ item.title|safe }}</h2>
                                    </a>
                                    <p>{{ item.content|striptags|safe|truncatewords:40 }}...</p>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <div class="col-md-6 mb-3">
                            <div class="news-box list-news-box">
                                <img src="{{ item.image_url|default:item.image.url }}">
                                <div class="news-box-content">
                                    <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="text-decoration-none text-dark">
                                        <h4>{{ item.title|safe }}</h4>
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>

            <h4 class="section-title">देश और दिल्ली (National & Delhi)</h4>
            <div class="row">
                {% for item in national_news %}
                    {% if forloop.first %}
                        <div class="col-12 mb-3">
                            <div class="news-box big-news-box">
                                <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}">
                                    <img src="{{ item.image_url|default:item.image.url }}" alt="{{ item.title }}">
                                </a>
                                <div class="news-box-content">
                                    <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="text-decoration-none text-dark">
                                        <h2>{{ item.title|safe }}</h2>
                                    </a>
                                    <p>{{ item.content|striptags|safe|truncatewords:35 }}...</p>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <div class="col-md-6 mb-3">
                            <div class="news-box list-news-box">
                                <img src="{{ item.image_url|default:item.image.url }}">
                                <div class="news-box-content">
                                    <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="text-decoration-none text-dark">
                                        <h4>{{ item.title|safe }}</h4>
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>

            <h4 class="section-title">उत्तर प्रदेश (UP News)</h4>
            <div class="row">
                {% for item in up_news %}
                    {% if forloop.first %}
                        <div class="col-12 mb-3">
                            <div class="news-box big-news-box">
                                <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}">
                                    <img src="{{ item.image_url|default:item.image.url }}" alt="{{ item.title }}">
                                </a>
                                <div class="news-box-content">
                                    <span class="text-danger fw-bold">{{ item.district }}</span>
                                    <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="text-decoration-none text-dark">
                                        <h2>{{ item.title|safe }}</h2>
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <div class="col-md-4 col-6 mb-3">
                            <div class="news-box">
                                <img src="{{ item.image_url|default:item.image.url }}" style="height: 150px;">
                                <div class="news-box-content">
                                    <span class="text-danger small fw-bold">{{ item.district }}</span>
                                    <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="text-decoration-none text-dark">
                                        <h4 style="font-size: 0.9rem;">{{ item.title|safe|truncatechars:80 }}</h4>
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>

            <h4 class="section-title">मनोरंजन (Bollywood & Hollywood)</h4>
            <div class="row">
                {% for item in entertainment_news %}
                    {% if forloop.first %}
                        <div class="col-12 mb-3">
                            <div class="news-box big-news-box">
                                <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}">
                                    <img src="{{ item.image_url|default:item.image.url }}" alt="{{ item.title }}">
                                </a>
                                <div class="news-box-content">
                                    <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="text-decoration-none text-dark">
                                        <h2>{{ item.title|safe }}</h2>
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <div class="col-md-6 mb-3">
                            <div class="news-box list-news-box">
                                <img src="{{ item.image_url|default:item.image.url }}">
                                <div class="news-box-content">
                                    <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="text-decoration-none text-dark">
                                        <h4>{{ item.title|safe }}</h4>
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>

            <h4 class="section-title">खेल (Sports)</h4>
            <div class="row">
                {% for item in sports_news %}
                    {% if forloop.first %}
                        <div class="col-12 mb-3">
                            <div class="news-box big-news-box">
                                <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}">
                                    <img src="{{ item.image_url|default:item.image.url }}" alt="{{ item.title }}">
                                </a>
                                <div class="news-box-content">
                                    <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="text-decoration-none text-dark">
                                        <h2>{{ item.title|safe }}</h2>
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <div class="col-md-6 mb-3">
                            <div class="news-box list-news-box">
                                <img src="{{ item.image_url|default:item.image.url }}">
                                <div class="news-box-content">
                                    <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="text-decoration-none text-dark">
                                        <h4>{{ item.title|safe }}</h4>
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>

        </div>

        <div class="col-lg-3">
            <div class="sticky-top" style="top: 20px;">
                {% include "mynews/sidebar.html" %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
