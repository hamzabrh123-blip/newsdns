{% load static %}
{% load cloudinary_tags %} 

<aside class="sidebar-wrapper">
    
    <div class="sidebar-box mb-4 text-center" style="border: 1px solid #ffeeba; background: #fffcf5;">
        <div class="ad-tag">ADVERTISEMENT</div>
        <div class="ad-content-wrapper" style="min-height: 250px;">
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3171847065256414" crossorigin="anonymous"></script>
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-3171847065256414"
                 data-ad-slot="5217172506"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    </div>

    {% if world_sidebar %}
    <div class="sidebar-box mb-4">
        <h5 class="box-title border-danger">
            <i class="fas fa-globe-americas text-danger"></i> दुनिया (World)
        </h5>
        <div class="post-list">
            {% for item in world_sidebar %}
            <div class="post-item border-bottom">
                <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="post-title-link">
                    {{ item.title|truncatechars:70 }}
                </a>
                <div class="post-meta">{{ item.date|timesince }} पहले</div>
            </div>
            {% endfor %}
        </div>
        <a href="{% url 'district_news' 'International' %}" class="view-all-btn text-danger">World की और खबरें →</a>
    </div>
    {% endif %}

    <div class="sidebar-box ad-box mb-4">
        <div class="ad-tag">SPONSORED</div>
        <div class="ad-frame">
            <script async src="https://js.onclckmn.com/static/onclicka.js" data-admpid="416535"></script>
        </div>
    </div>

    {% if up_sidebar %}
    <div class="sidebar-box mb-4">
        <h5 class="box-title border-primary">
            <i class="fas fa-map-marker-alt text-primary"></i> उत्तर प्रदेश
        </h5>
        <div class="thumb-list">
            {% for item in up_sidebar %}
            <div class="thumb-item d-flex align-items-center mb-3">
                <div class="thumb-img">
                    <img src="{% if item.image_url %}{{ item.image_url|optimize_image }}{% elif item.image %}{{ item.image.url|optimize_image }}{% else %}{% static 'logo.png' %}{% endif %}" 
                         alt="{{ item.title }}" onerror="this.src='{% static 'logo.png' %}';">
                </div>
                <div class="thumb-content ms-2">
                    <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="thumb-link">
                        {{ item.title|truncatechars:50 }}
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
        <a href="{% url 'district_news' 'Uttar-Pradesh' %}" class="view-all-btn text-primary">पूरा यूपी देखें →</a>
    </div>
    {% endif %}

    {% if bazaar_sidebar %}
    <div class="sidebar-box market-section mb-4">
        <h5 class="box-title border-success">
            <i class="fas fa-chart-line text-success"></i> बाज़ार (Market)
        </h5>
        <div class="market-list">
            {% for item in bazaar_sidebar %}
            <div class="market-item">
                <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="market-link">
                    <i class="fas fa-arrow-right small text-success"></i> {{ item.title|truncatechars:65 }}
                </a>
            </div>
            {% endfor %}
        </div>
        <a href="{% url 'district_news' 'Market' %}" class="view-all-btn text-success text-center mt-2">आज का ताज़ा भाव →</a>
    </div>
    {% endif %}

</aside>
