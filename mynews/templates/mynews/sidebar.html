{% load static %}

<style>
    .aj-sidebar { font-family: 'Mukta', sans-serif; }
    .side-block { background: #fff; border: 1px solid #eee; border-radius: 12px; overflow: hidden; margin-bottom: 25px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
    
    /* Aaj Tak Style Red Header */
    .side-head { background: #cf2030; color: #fff; padding: 12px 15px; font-weight: 800; font-size: 1.1rem; display: flex; align-items: center; gap: 10px; border-bottom: 3px solid #b11b29; }
    .side-head.blue { background: #0056b3; border-color: #004494; }
    .side-head.green { background: #1e7e34; border-color: #155d27; }

    .side-list { padding: 10px; }
    .side-item { display: flex; gap: 12px; padding: 12px 5px; border-bottom: 1px solid #f0f0f0; transition: 0.3s; text-decoration: none !important; }
    .side-item:last-child { border-bottom: none; }
    .side-item:hover { background: #fffcfc; transform: translateX(5px); }

    .side-img-box { position: relative; flex-shrink: 0; width: 90px; height: 65px; border-radius: 6px; overflow: hidden; }
    .side-img-box img { width: 100%; height: 100%; object-fit: cover; }
    
    .side-txt { display: flex; flex-direction: column; justify-content: space-between; }
    .side-item-title { font-size: 0.95rem; font-weight: 700; color: #222; line-height: 1.3; margin-bottom: 5px; }
    .side-meta { font-size: 11px; color: #888; display: flex; align-items: center; gap: 8px; }
    .side-meta i { color: #cf2030; }

    .trending-num { font-size: 1.5rem; font-weight: 900; color: #eee; margin-right: 10px; font-style: italic; }
</style>

<div class="aj-sidebar">

    <div class="side-block p-2 text-center mb-4">
        <small class="text-muted d-block mb-1">PROMOTED</small>
        <script async src="https://js.onclckmn.com/static/onclicka.js" data-admpid="416535"></script>
    </div>

    {% if world_sidebar %}
    <div class="side-block">
        <div class="side-head"><i class="fas fa-globe"></i> दुनिया (World)</div>
        <div class="side-list">
            {% for item in world_sidebar %}
            <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="side-item">
                <div class="side-img-box">
                    <img src="{% if item.image_url %}{{ item.image_url }}{% elif item.image %}{{ item.image.url }}{% else %}{% static 'logo.png' %}{% endif %}">
                </div>
                <div class="side-txt">
                    <div class="side-item-title">{{ item.title|truncatechars:50 }}</div>
                    <div class="side-meta">
                        <span><i class="far fa-calendar-alt"></i> {{ item.date|date:"d M" }}</span>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    {% if up_sidebar %}
    <div class="side-block">
        <div class="side-head blue"><i class="fas fa-map-marker-alt"></i> उत्तर प्रदेश</div>
        <div class="side-list">
            {% for item in up_sidebar %}
            <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="side-item">
                <div class="trending-num">{{ forloop.counter }}</div>
                <div class="side-txt">
                    <div class="side-item-title">{{ item.title|truncatechars:60 }}</div>
                    <div class="side-meta">
                        <span class="text-primary fw-bold">{{ item.district }}</span>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    {% if bazaar_sidebar %}
    <div class="side-block">
        <div class="side-head green"><i class="fas fa-chart-line"></i> बाज़ार (Market)</div>
        <div class="side-list">
            {% for item in bazaar_sidebar %}
            <a href="{% url 'news_detail' item.url_city|default:'news' item.slug %}" class="side-item">
                <div class="side-img-box">
                    <img src="{% if item.image_url %}{{ item.image_url }}{% elif item.image %}{{ item.image.url }}{% else %}{% static 'logo.png' %}{% endif %}">
                </div>
                <div class="side-txt">
                    <div class="side-item-title">{{ item.title|truncatechars:50 }}</div>
                    <div class="side-meta">
                        <span class="text-success"><i class="fas fa-rupee-sign"></i> {{ item.date|date:"d M" }}</span>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
    {% endif %}

</div>
